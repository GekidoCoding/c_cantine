<ion-content class="menu-content" [fullscreen]="true"  *ngIf="!scanning">
  <div class="header-section" >
    <h1>Scanner et valider</h1>
    <p class="subtitle">Cliquez sur le bouton ci-dessous pour scanner le Code QR</p>
  </div>
  <div class="repas-container">
    <ion-button class="round-button" (click)="startScan()" >
      <ion-icon name="scan-outline" class="scan-icon"></ion-icon>
    </ion-button>
    <ng-container *ngIf="repas && (repas.lib_menu || repas.description) && !scanning else noRepas">
      <ion-card class="repas-card" style="max-width: 100%; width: 90%">
        <ion-card-header>
          <ion-card-title class="repas-title">
            <p><strong style="color: #2c3e50;">Matricule : </strong> {{repas.cantAgentWithLib.agent_matricule}}</p>
            <p><strong style="color: #2c3e50;">Repas : </strong> {{repas.lib_menu}}</p>
            <p>
              <strong style="color: #2c3e50;">Reception : </strong>
              <span style="font-size: 1rem;" [ngClass]="repas.cantAgentWithLib.flag_recu != null ? 'text-green' : 'text-red'">
                {{ repas.cantAgentWithLib.flag_recu != null ? 'Reçu' : 'Non reçu' }}
              </span>
            </p>
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p class="repas-description"><strong style="color: #2c3e50;">Description : </strong> {{repas.description ?? 'N/A' }}</p>
          <div class="scan-actions" *ngIf="repas.cantAgentWithLib.flag_recu != null">
            <ion-button color="primary" (click)="startScan()" class="rescan-btn">
              <ion-icon name="scan-outline"></ion-icon>
              Scanner un autre code
            </ion-button>
          </div>
        </ion-card-content>
      </ion-card>
    </ng-container>
    <ng-template #noRepas >
      <div class="no-repas-message" >
        <ion-card class="empty-card">
          <ion-card-content>
            <div class="empty-content">
              <ion-icon name="qr-code-outline" color="medium" size="large"></ion-icon>
              <h3>Pas de repas scanné pour le moment</h3>
              <p>Cliquez sur le bouton ci-dessus pour scanner</p>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </ng-template>
   
  </div>
<ion-content>
